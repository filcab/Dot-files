#!/usr/bin/env python

from __future__ import print_function

import distutils.spawn
import subprocess
import sys

d = {'darwin': 'osxkeychain', 'linux2': 'cache', 'win32': 'wincred'}
helper_name = d[sys.platform]

if helper_name == 'cache':
  helper = ['git', 'credential-cache']
else:
  helper_name = 'git-credential-{}'.format(helper_name)
  helper = [distutils.spawn.find_executable(helper_name)]

print('helper: executing: {}'.format(helper+sys.argv[1:]), file=sys.stderr)
sys.exit(subprocess.call(helper + sys.argv[1:]))
